<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SHAMELESS Blackjack</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

  body {
    margin: 0;
    background: linear-gradient(135deg, #1a001a, #330033);
    font-family: 'Orbitron', sans-serif;
    color: #ddd;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    user-select: none;
  }

  h1 {
    margin: 20px 0 10px;
    color: #d48aff;
    text-shadow: 0 0 10px #a64ca6;
    letter-spacing: 3px;
  }

  #game {
    background: #220022cc;
    border: 2px solid #a64ca6;
    border-radius: 15px;
    padding: 20px;
    width: 420px;
    box-shadow: 0 0 20px #a64ca6aa;
  }

  .hand-container {
    display: flex;
    gap: 12px;
    margin-bottom: 15px;
    min-height: 110px;
  }

  .card {
    width: 70px;
    height: 100px;
    background: #330033;
    border-radius: 10px;
    box-shadow:
      inset 0 0 10px #a64ca6,
      0 3px 7px #000;
    color: white;
    position: relative;
    font-weight: 700;
    font-size: 22px;
    line-height: 24px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 8px 6px;
    user-select: none;
    transition: transform 0.2s ease;
  }

  .card:hover {
    transform: translateY(-6px);
    box-shadow:
      0 0 20px #d48aff,
      inset 0 0 15px #d48aff;
  }

  .card.red {
    color: #ff6f91;
  }

  .card .corner {
    font-size: 18px;
  }

  .card .suit {
    font-size: 26px;
    text-align: center;
    line-height: 0.8;
  }

  .card.back {
    background: linear-gradient(45deg, #a64ca6, #330033);
    box-shadow: inset 0 0 20px #a64ca6;
    color: transparent;
    cursor: default;
  }

  .buttons {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
  }

  button {
    background: #660066;
    border: 2px solid #a64ca6;
    border-radius: 10px;
    color: #d48aff;
    font-size: 16px;
    font-weight: 600;
    padding: 10px 20px;
    cursor: pointer;
    flex-grow: 1;
    transition: background 0.3s ease, color 0.3s ease;
    user-select: none;
  }

  button:disabled {
    background: #440044;
    border-color: #662266;
    color: #6b3a6b;
    cursor: not-allowed;
  }

  button:hover:not(:disabled) {
    background: #a64ca6;
    color: #fff;
    box-shadow: 0 0 8px #d48aff;
  }

  #status {
    text-align: center;
    margin-bottom: 20px;
    font-size: 18px;
    min-height: 24px;
    letter-spacing: 1.2px;
    color: #f0b0ff;
    text-shadow: 0 0 4px #a64ca6;
  }

  #bet-control {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 25px;
  }

  #bet-control label {
    font-size: 16px;
    user-select: none;
  }

  #betSlider {
    width: 200px;
    margin: 0 10px;
    accent-color: #a64ca6;
    cursor: pointer;
  }

  #betInfo {
    font-weight: 700;
    font-size: 16px;
    color: #d48aff;
    min-width: 110px;
    text-align: right;
  }

  #stats {
    background: #330033cc;
    border: 1px solid #a64ca6;
    border-radius: 12px;
    padding: 12px 18px;
    color: #d48aff;
    font-size: 15px;
    line-height: 1.4;
    user-select: none;
    box-shadow: inset 0 0 10px #a64ca6aa;
    margin-bottom: 20px;
  }

  #chipsPlayer, #chipsBet {
    position: relative;
    width: 140px;
    height: 50px;
    margin-bottom: 20px;
    user-select: none;
  }

  .chip {
    position: absolute;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: 2.5px solid #ddd;
    box-shadow:
      inset 0 0 8px rgba(255,255,255,0.8),
      0 1px 3px rgba(0,0,0,0.8);
    cursor: default;
    transition: transform 0.3s ease;
  }

  .chip.red {
    background: radial-gradient(circle at center, #ff4c4c, #a60000);
    border-color: #ff9090;
  }

  .chip.black {
    background: radial-gradient(circle at center, #222222, #000000);
    border-color: #888888;
  }

  #chipsPlayer {
    border: 1px dashed #a64ca6;
    box-shadow: inset 0 0 10px #a64ca6;
  }

  #chipsBet {
    border: 1px dashed #d48aff;
    box-shadow: inset 0 0 10px #d48aff;
  }

  /* Scrollbar for bet slider in Firefox */
  input[type=range] {
    scrollbar-width: thin;
    scrollbar-color: #a64ca6 transparent;
  }
</style>
</head>
<body>

<h1>SHAMELESS Blackjack</h1>

<div id="game">
  <div id="chipsPlayer" title="Your Chips"></div>
  <div id="chipsBet" title="Current Bet"></div>

  <div id="bet-control">
    <label for="betSlider">Bet:</label>
    <input type="range" id="betSlider" min="10" max="500" step="10" value="50" />
    <div id="betInfo">Bet: 50 chips</div>
  </div>

  <div class="hand-container" id="dealerHandContainer" aria-label="Dealer's hand"></div>
  <div class="hand-container" id="playerHandContainer" aria-label="Your hand"></div>

  <div class="buttons">
    <button id="btnDeal">Deal</button>
    <button id="btnHit" disabled>Hit</button>
    <button id="btnStand" disabled>Stand</button>
  </div>

  <div id="status">Place your bet and press Deal.</div>

  <div id="stats" aria-live="polite">
    Wins: <span id="wins">0</span> |
    Losses: <span id="losses">0</span> |
    Pushes: <span id="pushes">0</span> |
    Streak: <span id="streak">0</span> |
    Chips: <span id="totalChips">1000</span>
  </div>
</div>

<script>
  // Deck and game variables
  let deck = [];
  let playerHand = [];
  let dealerHand = [];
  let playerChips = 1000;
  let currentBet = 50;
  let wins = 0, losses = 0, pushes = 0, streak = 0;

  const suits = ['♠', '♥', '♦', '♣'];
  const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];

  // DOM elements
  const playerHandContainer = document.getElementById('playerHandContainer');
  const dealerHandContainer = document.getElementById('dealerHandContainer');
  const btnDeal = document.getElementById('btnDeal');
  const btnHit = document.getElementById('btnHit');
  const btnStand = document.getElementById('btnStand');
  const statusDiv = document.getElementById('status');
  const betSlider = document.getElementById('betSlider');
  const betInfo = document.getElementById('betInfo');
  const winsSpan = document.getElementById('wins');
  const lossesSpan = document.getElementById('losses');
  const pushesSpan = document.getElementById('pushes');
  const streakSpan = document.getElementById('streak');
  const totalChipsSpan = document.getElementById('totalChips');
  const chipsPlayer = document.getElementById('chipsPlayer');
  const chipsBet = document.getElementById('chipsBet');

  // Create and shuffle deck
  function createDeck() {
    deck = [];
    for (const suit of suits) {
      for (const value of values) {
        deck.push({ suit, value });
      }
    }
  }

  function shuffleDeck() {
    for (let i = deck.length -1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i+1));
      [deck[i], deck[j]] = [deck[j], deck[i]];
    }
  }

  // Calculate hand value considering Aces as 1 or 11
  function handValue(hand) {
    let val = 0;
    let aces = 0;
    for (const card of hand) {
      if (['J', 'Q', 'K'].includes(card.value)) val += 10;
      else if (card.value === 'A') {
        val += 11;
        aces++;
      } else val += parseInt(card.value);
    }
    while (val > 21 && aces > 0) {
      val -= 10;
      aces--;
    }
    return val;
  }

  // Render cards in a container
  function renderHand(hand, container, hideSecondCard) {
    container.innerHTML = '';
    hand.forEach((card, i) => {
      const cardEl = document.createElement('div');
      cardEl.classList.add('card');
      // Hide dealer's second card if needed
      if (hideSecondCard && i === 1) {
        cardEl.classList.add('back');
        container.appendChild(cardEl);
        return;
      }

      const isRed = (card.suit === '♥' || card.suit === '♦');
      if (isRed) cardEl.classList.add('red');

      // Card corners with value & suit
      cardEl.innerHTML = `
        <div class="corner top-left">${card.value}<br>${card.suit}</div>
        <div class="suit">${card.suit}</div>
        <div class="corner bottom-right">${card.value}<br>${card.suit}</div>
      `;
      container.appendChild(cardEl);
    });
  }

  // Update chip stacks display (player chips)
  function updatePlayerChipsStack() {
    chipsPlayer.innerHTML = '';
    const chipsCount = Math.min(Math.floor(playerChips / 10), 20);
    for (let i = 0; i < chipsCount; i++) {
      const chip = document.createElement('div');
      chip.classList.add('chip');
      chip.classList.add(i % 2 === 0 ? 'red' : 'black');
      chip.style.left = `${i * 6}px`;
      chip.style.top = `${-i * 4}px`;
      chipsPlayer.appendChild(chip);
    }
  }

  // Update chip stacks display (bet chips)
  function updateBetChipsStack() {
    chipsBet.innerHTML = '';
    const chipsCount = Math.min(Math.floor(currentBet / 10), 15);
    for (let i = 0; i < chipsCount; i++) {
      const chip = document.createElement('div');
      chip.classList.add('chip');
      chip.classList.add(i % 2 === 0 ? 'red' : 'black');
      chip.style.left = `${i * 7}px`;
      chip.style.top = `${-i * 5}px`;
      chipsBet.appendChild(chip);
    }
  }

  // Enable/disable buttons helper
  function setButtons(deal, hit, stand) {
    btnDeal.disabled = !deal;
    btnHit.disabled = !hit;
    btnStand.disabled = !stand;
  }

  // Reset game state for a new round
  function resetGame() {
    playerHand = [];
    dealerHand = [];
    setButtons(true, false, false);
    statusDiv.textContent = "Place your bet and press Deal.";
    renderHand(playerHand, playerHandContainer, false);
    renderHand(dealerHand, dealerHandContainer, true);
    updatePlayerChipsStack();
    updateBetChipsStack();
  }

  // Deal initial cards
  function deal() {
    if (currentBet > playerChips) {
      statusDiv.textContent = "You don't have enough chips for that bet.";
      return;
    }
    setButtons(false, true, true);
    playerChips -= currentBet;
    updatePlayerChipsStack();
    updateBetChipsStack();
    createDeck();
    shuffleDeck();

    playerHand.push(deck.pop());
    dealerHand.push(deck.pop());
    playerHand.push(deck.pop());
    dealerHand.push(deck.pop());

    renderHand(playerHand, playerHandContainer, false);
    renderHand(dealerHand, dealerHandContainer, true);

    let pVal = handValue(playerHand);
    if (pVal === 21) {
      // Blackjack right away
      setTimeout(endRound, 1200);
    } else {
      statusDiv.textContent = "Hit or Stand?";
    }
  }

  // Player hits
  function hit() {
    playerHand.push(deck.pop());
    renderHand(playerHand, playerHandContainer, false);
    let val = handValue(playerHand);
    if (val > 21) {
      setTimeout(endRound, 800);
    }
  }

  // Player stands
  function stand() {
    // Reveal dealer's hidden card
    renderHand(dealerHand, dealerHandContainer, false);

    // Dealer hits until 17 or higher
    let dealerVal = handValue(dealerHand);

    function dealerTurn() {
      dealerVal = handValue(dealerHand);
      if (dealerVal < 17) {
        dealerHand.push(deck.pop());
        renderHand(dealerHand, dealerHandContainer, false);
        setTimeout(dealerTurn, 800);
      } else {
        endRound();
      }
    }
    setTimeout(dealerTurn, 800);
    setButtons(false, false, false);
  }

  // End round and calculate results
  function endRound() {
    setButtons(true, false, false);

    let playerVal = handValue(playerHand);
    let dealerVal = handValue(dealerHand);
    renderHand(dealerHand, dealerHandContainer, false);

    if (playerVal > 21) {
      statusDiv.textContent = "You busted! You lose.";
      losses++;
      streak = 0;
    } else if (dealerVal > 21) {
      statusDiv.textContent = "Dealer busted! You win!";
      wins++;
      streak++;
      playerChips += currentBet * 2;
    } else if (playerVal === dealerVal) {
      statusDiv.textContent = "Push! Bet returned.";
      pushes++;
      playerChips += currentBet;
      streak = 0;
    } else if (playerVal === 21 && playerHand.length === 2) {
      statusDiv.textContent = "Blackjack! You win 1.5x your bet!";
      wins++;
      streak++;
      playerChips += Math.floor(currentBet * 2.5);
    } else if (playerVal > dealerVal) {
      statusDiv.textContent = "You win!";
      wins++;
      streak++;
      playerChips += currentBet * 2;
    } else {
      statusDiv.textContent = "You lose.";
      losses++;
      streak = 0;
    }

    updateStats();
    updatePlayerChipsStack();
    updateBetChipsStack();

    // Auto reset if player runs out of chips
    if (playerChips <= 0) {
      statusDiv.textContent = "Game over! You ran out of chips.";
      setButtons(false, false, false);
    }
  }

  // Update stats panel
  function updateStats() {
    winsSpan.textContent = wins;
    lossesSpan.textContent = losses;
    pushesSpan.textContent = pushes;
    streakSpan.textContent = streak > 0 ? `+${streak}` : '0';
    totalChipsSpan.textContent = playerChips;
  }

  // Handle bet slider change
  betSlider.addEventListener('input', () => {
    currentBet = parseInt(betSlider.value);
    betInfo.textContent = `Bet: ${currentBet} chips`;
    updateBetChipsStack();
  });

  // Button event listeners
  btnDeal.addEventListener('click', () => {
    if (playerChips < currentBet) {
      statusDiv.textContent = "Not enough chips for this bet.";
      return;
    }
    deal();
  });

  btnHit.addEventListener('click', () => {
    hit();
  });

  btnStand.addEventListener('click', () => {
    stand();
  });

  // Initialize game on load
  resetGame();
  updateStats();
</script>

</body>
</html>
