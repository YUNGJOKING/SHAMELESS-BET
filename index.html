<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ultimate SHAMELESS Blackjack</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    @keyframes chip-pop { 0% { transform: scale(0.6); opacity: 0; }
                          50% { transform: scale(1.1); opacity: 1; }
                          100% { transform: scale(1); } }
    body {
      margin:0; padding:1rem;
      background: radial-gradient(#111, #000);
      color:#fff; font-family:'Courier New', monospace;
      text-align:center;
    }
    h1,h2,h3 { text-shadow:0 0 10px #0ff; color:#0ff; }
    .flex { display:flex; justify-content:center; flex-wrap:wrap; gap:1rem; }
    .cards { font-size:2rem; min-height:2.5rem; word-break:break-word; }
    .button, .chip { transition:.2s; cursor:pointer; }
    .button {
      background:#222; border:2px solid #0ff; color:#0ff;
      padding:.8rem 1.6rem; text-transform:uppercase;
      box-shadow:0 0 10px #0ff;
    }
    .button:hover { background:#0ff; color:#000; }
    .chip {
      background: radial-gradient(#f00,#800);
      width:64px; height:64px; border-radius:50%;
      border:4px solid #fff; box-shadow:0 0 10px #f00;
      display:flex; align-items:center; justify-content:center;
      font-weight:bold; color:#fff; font-size:1rem;
    }
    .chip:hover { animation:chip-pop .3s ease forwards; }
    #status { font-size:1.2rem; color:#ff0; margin:1rem;}
    #stats { font-size:.9rem; color:#0f0; margin-top:1rem; text-align:left; max-width:320px; margin:auto; }
    @media (max-width:600px){
      .flex { flex-direction:column; align-items:center; }
    }
  </style>
</head>
<body>

  <h1>Ultimate SHAMELESS Blackjack</h1>
  <div id="balance">ðŸ’° Balance: $<span id="player-balance">1000</span></div>
  <div>ðŸŽ² Bet: $<span id="bet">0</span></div>

  <div class="flex">
    <div><h2>You (<span id="player-total">0</span>)</h2><div class="cards" id="player-cards"></div></div>
    <div><h2>Dealer (<span id="dealer-total">0</span>)</h2><div class="cards" id="dealer-cards"></div></div>
  </div>

  <div class="flex">
    <button class="button" onclick="hit()">Hit</button>
    <button class="button" onclick="stand()">Stand</button>
    <button class="button" onclick="doubleDown()">Double</button>
    <button class="button" onclick="splitHand()">Split</button>
    <button class="button" onclick="takeInsurance()">Insurance</button>
    <button class="button" onclick="restart()">Restart</button>
  </div>

  <div class="flex">
    <div class="chip" onclick="placeBet(10)">$10</div>
    <div class="chip" onclick="placeBet(50)">$50</div>
    <div class="chip" onclick="placeBet(100)">$100</div>
  </div>

  <div id="status"></div>
  <div id="stats"></div>

  <script>
    const suits=['â™ ','â™¥','â™¦','â™£'], vals=['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
    let deck=[], playerHands=[], dealerHand=[], currentHand=0;
    let balance=1000, bet=0, insBet=0, gameOver=true;
    let stats={played:0, wins:0, losses:0, ties:0, profit:0};

    function initDeck(){
      deck=[];
      for(let s of suits) for(let v of vals) deck.push({v,s});
      for(let i=deck.length-1;i>0;i--){
        let j=Math.floor(Math.random()*(i+1));
        [deck[i],deck[j]]=[deck[j],deck[i]];
      }
    }
    function cardValue(c){
      if(['J','Q','K'].includes(c.v)) return 10;
      if(c.v==='A') return 11; return +c.v;
    }
    function calcTotal(h){
      let tot=0, aces=0;
      h.forEach(c=>{tot+=cardValue(c); if(c.v==='A') aces++;});
      while(tot>21 && aces--) tot-=10;
      return tot;
    }
    function draw(h){h.push(deck.pop());}
    function render(){
      let ph=playerHands.map(h=>h.map(c=>c.v+c.s).join(' '));
      document.getElementById('player-cards').textContent=ph.join('\n|\n');
      document.getElementById('dealer-cards').textContent=dealerHand.map(c=>c.v+c.s).join(' ');
      document.getElementById('player-total').textContent=calcTotal(playerHands[currentHand]);
      document.getElementById('dealer-total').textContent=gameOver? calcTotal(dealerHand) : dealerHand[0].v+'?';
      document.getElementById('player-balance').textContent=balance;
      document.getElementById('bet').textContent=bet;
      document.getElementById('stats').textContent=
        `Hands: ${stats.played}, Wins: ${stats.wins}, Losses: ${stats.losses}, Ties: ${stats.ties}, Profit: $${stats.profit}`;
    }

    function startGame(){
      if(bet===0) return alert('Place bet!');
      gameOver=false; insBet=0; stats.played++;
      initDeck(); dealerHand=[]; playerHands=[[],[]]; currentHand=0;
      draw(playerHands[0]); draw(playerHands[0]); draw(dealerHand); draw(playerHands[0]);
      render();
      if(dealerHand[0].v==='A') status('Offer insurance');
    }

    function placeBet(a){
      if(!gameOver) return;
      if(balance>=a){balance-=a; bet+=a; render()} 
    }

    function hit(){
      if(gameOver) return;
      let h=playerHands[currentHand];
      draw(h); render();
      if(calcTotal(h)>21) nextOrEnd();
    }

    function stand(){
      if(gameOver) return nextOrEnd();
    }

    function doubleDown(){
      if(gameOver) return;
      let h=playerHands[currentHand];
      if(h.length!==2 || balance<bet) return;
      balance-=bet; bet*=2; draw(h); render(); nextOrEnd();
    }

    function splitHand(){
      let h=playerHands[0];
      if(gameOver|| h.length!==2 || h[0].v!==h[1].v || balance<bet) return;
      balance-=bet;
      playerHands[1]=[h.pop()];
      draw(playerHands[0]); draw(playerHands[1]);
      render();
    }

    function takeInsurance(){
      if(gameOver|| insBet|| dealerHand[0].v!=='A') return;
      if(balance>=bet/2){balance-=bet/2; insBet=bet/2; render()}
    }

    function nextOrEnd(){
      if(currentHand+1<playerHands.length){
        currentHand++; render(); 
      } else dealerPlay(); 
    }

    function dealerPlay(){
      gameOver=true;
      while(calcTotal(dealerHand)<17 || (calcTotal(dealerHand)===17 && dealerHand.some(c=>c.v==='A') && calcTotal(dealerHand)<=17)){
        draw(dealerHand);
      }
      settle();
    }

    function settle(){
      let dealerTotal=calcTotal(dealerHand);
      playerHands.forEach(h=>{
        let pt=calcTotal(h);
        if(pt>21){ stats.losses++; stats.profit-=bet; }
        else if(dealerTotal>21||pt>dealerTotal){ stats.wins++; stats.profit+=bet*2; balance+=bet*2; }
        else if(pt<dealerTotal){ stats.losses++; stats.profit-=bet; }
        else { stats.ties++; stats.profit+=bet; balance+=bet; }
      });
      if(insBet){
        if(calcTotal(dealerHand)===21) { balance+=insBet*3; stats.profit+=insBet*2;}
      }
      status('Round over. Click Restart');
      bet=0; insBet=0;
      render();
    }

    function status(msg){
      document.getElementById('status').textContent=msg;
    }

    function restart(){
      if(!gameOver) return startGame();
      else { bet=0; status('Place bet and click Restart'); render(); }
    }

    // init page
    gameOver=true; status('Place bet and click Restart'); render();
  </script>
</body>
</html>
